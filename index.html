<html>
  <head>
    <title>Beneath the Surface</title>
    <script src="phaser.js"></script>
  </head>

  <body>
  </body>

  <script>


    var preload = function () {
      game.load.image("player", "assets/pics/player.png");
    }

    var player;

    var lives = 3;
    var score = 0;
    var scoreText;
    var livesText;
    var introText;

    var create = function () {
      game.physics.startSystem(Phaser.Physics.ARCADE);
      game.physics.arcade.checkCollision.down = false;
      game.physics.arcade.gravity.y = 250;

      player = game.add.sprite(game.world.centerX, game.world.centerY, "player");
      player.anchor.set(0.5);

      game.physics.arcade.enable(player);

      player.body.collideWorldBounds = true;
      player.body.bounce.set(1);
      player.checkWorldBounds = true;
      player.events.onOutOfBounds.add(playerLost, this);

      // Text setup
      scoreText = game.add.text(32, 550, 'score: 0', { font: "20px Arial", fill: "#ffffff", align: "left" });
      livesText = game.add.text(680, 550, 'lives: 3', { font: "20px Arial", fill: "#ffffff", align: "left" });
      introText = game.add.text(game.world.centerX, 400, '- CLICK TO START -', { font: "40px Arial", fill: "#ffffff", align: "center" });
      introText.anchor.setTo(0.5, 0.5);

      game.input.onDown.add(releasePlayer, this);
    }

    var update = function () {
      player.body.x = game.input.x;
    }

    var render = function () {
      game.debug.inputInfo(32,32);
    }

    var playerLost = function () {
      alert("You lose!");
    }

    var releasePlayer = function () {
      introText.visible = false;

      if (playerOnGround) {
        // Have the player jump
      }

    }


    var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update, render: render });
  </script>

</html>
